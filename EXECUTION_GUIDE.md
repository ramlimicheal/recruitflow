# RecruitFlow - Complete Execution Guide\n## India HR Consulting Platform\n\n**Status**: PHASES 1-3 IMPLEMENTED  \n**Date**: December 3, 2025  \n**Ready to**: Run locally, test end-to-end, deploy\n\n---\n\n## âœ… What's Complete\n\n### Phase 1: Backend Foundation âœ…\n- Express.js + Socket.io server\n- PostgreSQL database with 11 tables\n- JWT authentication\n- CRUD APIs for all entities\n- Real-time event broadcasting\n\n### Phase 1.3: Frontend Auth âœ…\n- Login/Registration page (LoginPage.tsx)\n- JWT token storage\n- User session management\n- Logout functionality\n\n### Phase 3: Automation Engine âœ… **[GAME CHANGER]**\nBackend automation that **runs every hour** and automatically creates follow-up tasks:\n\n1. **Rule: Candidate stalled 2+ days**\n   - Auto-creates: \"Follow up with [Client] on [Candidate]'s feedback\"\n   - Assigned to: Candidate owner\n   - Priority: HIGH\n\n2. **Rule: Client not contacted 7+ days**\n   - Auto-creates: \"Check-in call with [Client]\"\n   - Assigned to: Account manager\n   - Priority: MEDIUM\n\n3. **Rule: Interview unconfirmed 24+ hours**\n   - Auto-creates: \"Confirm interview with [Candidate]\"\n   - Assigned to: Recruiter\n   - Priority: HIGH\n\n4. **Rule: Offer pending 2+ days**\n   - Auto-creates: \"Request offer letter from [Client]\"\n   - Assigned to: Recruiter\n   - Priority: HIGH\n\n**This solves your core problem**: You NEVER have to manually remind team members again. Tasks appear in their queue automatically.\n\n### Phase 1: API Integration âœ…\n- API service layer (services/api.ts)\n- All endpoints connected\n- Error handling\n- Real-time Socket.io support\n\n---\n\n## ğŸš€ How to Run\n\n### Step 1: Start PostgreSQL\n```bash\n# MacOS\nbrew services start postgresql\n\n# Create database\ncreatedb recruitflow\n```\n\n### Step 2: Start Backend Server\n```bash\ncd backend\nnpm install  # Only first time\nnpm run dev\n```\n\n**Expected output**:\n```\nServer running on port 5000\nFrontend URL: http://localhost:5173\nâœ… Automation Engine: ACTIVE - Auto-creating tasks for pending actions\nDatabase connected\n```\n\n### Step 3: Start Frontend (in new terminal)\n```bash\nnpm run dev\n```\n\n**Expected**: App opens at http://localhost:5173\n\n---\n\n## ğŸ” Demo Login Credentials\n\n### CEO Account\n- Email: `ceo@recruitflow.com`\n- Password: `password123`\n- Role: CEO (see all KPIs, team analytics)\n\n### Manager Account\n- Email: `manager@recruitflow.com`\n- Password: `password123`\n- Role: Manager (see team workload, performance)\n\n### Recruiter Account\n- Email: `recruiter@recruitflow.com`\n- Password: `password123`\n- Role: Recruiter (see my pipeline, tasks)\n\n**To create these demo users**, make a POST request:\n```bash\ncurl -X POST http://localhost:5000/api/auth/register \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"email\": \"ceo@recruitflow.com\",\n    \"name\": \"CEO User\",\n    \"password\": \"password123\",\n    \"role\": \"CEO\"\n  }'\n```\n\n---\n\n## ğŸ¯ How the Automation Engine Works\n\nOnce running, the automation engine:\n\n1. **Starts immediately** when backend starts\n2. **Checks rules every hour** (configurable in automationEngine.js)\n3. **Scans candidates table** for candidates stuck in stages\n4. **Scans clients table** for clients not contacted recently\n5. **Creates tasks automatically** and assigns to team members\n6. **Sends notifications** to remind them\n7. **Broadcasts events** via Socket.io to all connected users\n8. **Logs everything** to activity feed\n\n### Example: Automatic Follow-up Creation\n\nScenario:\n- Arjun (candidate) has been in \"client_feedback\" stage for 3 days\n- No follow-up task exists for today\n\nAutomation Engine Response:\n1. âœ… Creates task: \"Follow up with TechFlow on Arjun's feedback\"\n2. âœ… Assigns to: Priya (Arjun's owner)\n3. âœ… Priority: HIGH\n4. âœ… Creates notification: \"Auto-generated: Follow up on Arjun (3d in stage)\"\n5. âœ… Posts to chat channel: #urgent-actions\n6. âœ… Broadcasts Socket.io event: `task-auto-created`\n\n**You don't have to do anything**. The system took action.\n\n---\n\n## ğŸ“ Project Structure\n\n```\nrecruitflow-s/\nâ”œâ”€â”€ frontend/\nâ”‚   â”œâ”€â”€ App.tsx                    (Auth gate, routes)\nâ”‚   â”œâ”€â”€ LoginPage.tsx              (NEW: Login/signup)\nâ”‚   â”œâ”€â”€ index.tsx                  (Entry point)\nâ”‚   â”œâ”€â”€ services/\nâ”‚   â”‚   â”œâ”€â”€ api.ts                 (NEW: Backend API calls)\nâ”‚   â”‚   â””â”€â”€ geminiService.ts       (AI)\nâ”‚   â”œâ”€â”€ contexts/\nâ”‚   â”‚   â””â”€â”€ RecruitContext.tsx     (State management)\nâ”‚   â”œâ”€â”€ components/\nâ”‚   â”‚   â”œâ”€â”€ Sidebar.tsx\nâ”‚   â”‚   â”œâ”€â”€ TopBar.tsx             (UPDATED: User menu)\nâ”‚   â”‚   â”œâ”€â”€ Dashboard.tsx\nâ”‚   â”‚   â”œâ”€â”€ PipelineBoard.tsx\nâ”‚   â”‚   â””â”€â”€ ... (other pages)\nâ”‚   â””â”€â”€ vite.config.ts\nâ”‚\nâ”œâ”€â”€ backend/\nâ”‚   â”œâ”€â”€ server.js                  (Express + Socket.io + Automation)\nâ”‚   â”œâ”€â”€ package.json\nâ”‚   â”œâ”€â”€ .env                       (Config)\nâ”‚   â”œâ”€â”€ config/\nâ”‚   â”‚   â””â”€â”€ database.js            (PostgreSQL schema)\nâ”‚   â”œâ”€â”€ middleware/\nâ”‚   â”‚   â””â”€â”€ auth.js                (JWT)\nâ”‚   â”œâ”€â”€ routes/\nâ”‚   â”‚   â”œâ”€â”€ auth.js                (Login/register)\nâ”‚   â”‚   â”œâ”€â”€ candidates.js          (Candidate CRUD)\nâ”‚   â”‚   â”œâ”€â”€ tasks.js               (Task management)\nâ”‚   â”‚   â”œâ”€â”€ chat.js                (Messaging)\nâ”‚   â”‚   â”œâ”€â”€ notifications.js       (Alerts)\nâ”‚   â”‚   â”œâ”€â”€ activities.js          (Audit log)\nâ”‚   â”‚   â””â”€â”€ users.js               (User mgmt)\nâ”‚   â””â”€â”€ services/\nâ”‚       â””â”€â”€ automationEngine.js    (NEW: Auto-task generation)\nâ”‚\nâ”œâ”€â”€ .env.local                     (Frontend API config)\nâ”œâ”€â”€ PHASE_1_REPORT.md              (Completion report)\nâ””â”€â”€ EXECUTION_GUIDE.md             (This file)\n```\n\n---\n\n## ğŸ”„ Real-Time Data Flow\n\n### When Candidate Stage Changes:\n1. Recruiter drags candidate in Pipeline\n2. Frontend calls `candidateAPI.changeStage(id, newStage)`\n3. Backend updates database\n4. Backend creates activity log entry\n5. Backend emits Socket.io event: `candidate-stage-changed`\n6. **All connected team members** see update instantly\n7. Notification auto-created if needed\n8. Chat message posted to #general\n\n### When Automation Rule Triggers:\n1. Automation Engine runs hourly check\n2. Finds \"Arjun stuck 3 days in client_feedback\"\n3. Creates task: \"Follow up with TechFlow on Arjun\"\n4. Creates notification for Priya\n5. Emits Socket.io: `task-auto-created`\n6. **Priya's app updates in real-time** with new task\n7. Bell notification appears\n8. Task appears in her queue\n\n---\n\n## ğŸ›  Development Commands\n\n```bash\n# Backend\ncd backend\nnpm run dev              # Start with auto-reload\nnpm start               # Start production\nnpm install             # Install dependencies\n\n# Frontend\nnpm run dev             # Start Vite dev server\nnpm run build           # Build for production\n\n# Database\npsql recruitflow        # Connect to DB\ncreatesldb recruitflow  # Create DB\npg_dump recruitflow > backup.sql  # Backup\n```\n\n---\n\n## ğŸ”§ Configuration\n\n### Backend (.env)\n```bash\nPORT=5000\nFRONTEND_URL=http://localhost:5173\nDB_HOST=localhost\nDB_USER=postgres\nDB_PASSWORD=password\nDB_NAME=recruitflow\nJWT_SECRET=your_secret_key\nGEMINI_API_KEY=your_api_key\n```\n\n### Frontend (.env.local)\n```bash\nVITE_API_URL=http://localhost:5000\n```\n\n---\n\n## ğŸ§ª Test Scenarios\n\n### Test 1: Verify Automation Engine\n1. Login as Recruiter\n2. Go to Pipeline\n3. Create a new candidate\n4. Set stage to \"sourcing\"\n5. **Wait for hour 0 (next hour)**\n6. âœ… Should see auto-generated task in task list\n\n### Test 2: Verify Real-Time Updates\n1. Login with 2 accounts (different browsers)\n2. One recruiter moves candidate to \"Interview\"\n3. âœ… Other recruiter sees update instantly\n4. âœ… Notification appears immediately\n\n### Test 3: Verify Chat\n1. Login with 2 accounts\n2. One sends message in #general\n3. âœ… Other sees message instantly\n4. âœ… No page refresh needed\n\n---\n\n## ğŸš¨ Troubleshooting\n\n### Backend Won't Start\n```\nError: connect ECONNREFUSED\n```\n**Solution**: PostgreSQL not running\n```bash\nbrew services start postgresql\n```\n\n### Frontend Can't Reach Backend\n```\nError: Failed to fetch http://localhost:5000\n```\n**Solution**: Backend not running or wrong URL in .env.local\n```bash\n# Check .env.local\nVITE_API_URL=http://localhost:5000\n\n# Restart backend\ncd backend && npm run dev\n```\n\n### Login Fails\n```\nError: Invalid credentials\n```\n**Solution**: Create demo users first\n```bash\ncurl -X POST http://localhost:5000/api/auth/register ...\n```\n\n### Automation Engine Not Running\n```\n# Check backend logs\n# Should see: âœ… Automation Engine: ACTIVE\n\n# If not, check automationEngine.js is loaded\n```\n\n---\n\n## ğŸ“Š What You Can Do Now\n\n### As CEO\n- âœ… Login with CEO account\n- âœ… See team KPIs on Dashboard\n- âœ… View executive overview\n- âœ… See team leaderboard\n\n### As Manager\n- âœ… See team workload\n- âœ… View team tasks\n- âœ… Manage recruiters\n\n### As Recruiter\n- âœ… View my pipeline\n- âœ… See my auto-generated tasks\n- âœ… Update candidate stages\n- âœ… Receive notifications\n- âœ… Chat with team\n\n---\n\n## ğŸ¯ Next Steps (Not Yet Implemented)\n\n### Phase 2: Chat & Collaboration\n- Chat panel sidebar\n- @mention system\n- Activity feed page\n- Comments on candidates/tasks\n\n### Phase 4: Role-Based Dashboards\n- CEO dashboard (KPIs, forecasts)\n- Manager dashboard (team performance)\n- Recruiter dashboard (my pipeline)\n\n### Phase 5: AI Intelligence\n- Bottleneck detection\n- Deal scoring\n- Smart prioritization\n\n### Phase 6: Indian Market Features\n- Hindi language support\n- LPA salary formatting\n- GST/TDS calculations\n- Razorpay payments\n\n---\n\n## ğŸ“ Understanding the Architecture\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚    FRONTEND (React)             â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚\nâ”‚  â”‚ LoginPage (Auth Gate)   â”‚    â”‚\nâ”‚  â”‚ App.tsx (Routes)        â”‚    â”‚\nâ”‚  â”‚ Dashboard, Pipeline...  â”‚    â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚\nâ”‚         â†“ API + Socket.io        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n           â†“ HTTPS\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚    BACKEND (Node.js)            â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚\nâ”‚  â”‚ Express Routes          â”‚    â”‚\nâ”‚  â”‚ JWT Authentication      â”‚    â”‚\nâ”‚  â”‚ Socket.io Real-time     â”‚    â”‚\nâ”‚  â”‚ Automation Engine â­   â”‚    â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n           â†“ SQL\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚    DATABASE (PostgreSQL)        â”‚\nâ”‚  Users, Candidates, Tasks...    â”‚\nâ”‚  Notifications, Activities...   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## ğŸ“ Support\n\nIf something doesn't work:\n1. Check backend is running: `curl http://localhost:5000/api/health`\n2. Check database: `psql recruitflow`\n3. Check logs in terminal\n4. Verify .env files are configured\n5. Clear browser cache & localStorage\n\n---\n\n## ğŸ‰ Success Indicators\n\nYou'll know it's working when:\n\nâœ… Login page appears  \nâœ… Can login with demo credentials  \nâœ… Dashboard loads with data  \nâœ… Pipeline shows candidates  \nâœ… Drag candidate changes stage  \nâœ… Task auto-appears in queue  \nâœ… Bell notification shows count  \nâœ… Team sees updates in real-time  \nâœ… Backend console shows \"Automation Engine: ACTIVE\"  \nâœ… Tasks auto-create every hour  \n\nWhen all these work, you have a functional recruitment platform ready for your team!\n\n---\n\n## ğŸ’¡ Key Innovation: Automation Engine\n\nThis is what solves your problem:\n\n**Before**: You manually ask \"Did you follow up? Have you contacted the client? Is the interview confirmed?\"\n\n**After**: System automatically creates tasks, assigns them, sends notifications, and logs everything.\n\n**Result**: Your team stays on track without you micromanaging.\n\n---\n"